<form id="dm-application-form" class="space-y-6 max-w-2xl">
  <div>
    <label for="dm-discord" class="block font-semibold text-guild-brown mb-2">Discord Username *</label>
    <input type="text" id="dm-discord" name="discord" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent">
  </div>

  <div>
    <label for="dm-experience-level" class="block font-semibold text-guild-brown mb-2">D&D Experience Level *</label>
    <select id="dm-experience-level" name="experience" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent bg-white">
      <option value="">Select one...</option>
      <option value="beginner">Beginner (less than 1 year)</option>
      <option value="intermediate">Intermediate (1-3 years)</option>
      <option value="experienced">Experienced (3-5 years)</option>
      <option value="veteran">Veteran (5+ years)</option>
    </select>
  </div>

  <div>
    <label for="dm-experience" class="block font-semibold text-guild-brown mb-2">Experience as a DM *</label>
    <textarea id="dm-experience" name="dm-experience" rows="3" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent" placeholder="How long have you been DMing? What campaigns or one-shots have you run?"></textarea>
  </div>

  <div>
    <label for="dm-rules-familiarity" class="block font-semibold text-guild-brown mb-2">Familiarity with 5e 2024 Rules *</label>
    <select id="dm-rules-familiarity" name="rules-familiarity" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent bg-white">
      <option value="">Select one...</option>
      <option value="not-familiar">Not yet familiar</option>
      <option value="somewhat">Somewhat familiar</option>
      <option value="comfortable">Comfortable with the changes</option>
      <option value="very-familiar">Very familiar / already running 2024 rules</option>
    </select>
  </div>

  <div>
    <label for="dm-pbp-experience" class="block font-semibold text-guild-brown mb-2">Play-by-Post Experience *</label>
    <select id="dm-pbp-experience" name="pbp-experience" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent bg-white">
      <option value="">Select one...</option>
      <option value="none">None - new to PbP</option>
      <option value="player-only">Played in PbP games, never DMed</option>
      <option value="some-dm">Some PbP DM experience</option>
      <option value="experienced-dm">Experienced PbP DM</option>
    </select>
  </div>

  <div>
    <label for="dm-quest-ideas" class="block font-semibold text-guild-brown mb-2">What kind of quests would you like to run? *</label>
    <textarea id="dm-quest-ideas" name="quest-ideas" rows="4" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent" placeholder="Combat-heavy dungeon crawls? Mystery and intrigue? Exploration? Social encounters? Tell us what excites you."></textarea>
  </div>

  <div>
    <label for="dm-availability" class="block font-semibold text-guild-brown mb-2">Availability & Posting Frequency *</label>
    <textarea id="dm-availability" name="availability" rows="3" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent" placeholder="How often can you post? What times/days work best for you?"></textarea>
  </div>

  <div>
    <label for="dm-additional" class="block font-semibold text-guild-brown mb-2">Anything else you'd like us to know?</label>
    <textarea id="dm-additional" name="additional" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-guild-blue focus:border-transparent" placeholder="Optional"></textarea>
  </div>

  <div>
    <button type="submit" class="bg-guild-blue text-white px-8 py-4 rounded-md font-semibold hover:bg-guild-blue-dark transition-colors text-lg">Submit Application</button>
  </div>
</form>

<script>
document.getElementById('dm-application-form').addEventListener('submit', async function(e) {
  e.preventDefault();
  const form = e.target;
  const data = new FormData(form);

  try {
    const response = await fetch('https://formspree.io/f/xzznvpgz', {
      method: 'POST',
      body: data,
      headers: { 'Accept': 'application/json' }
    });

    if (response.ok) {
      window.location.href = '{{ "application-submitted/" | relURL }}';
    } else {
      alert('There was a problem submitting your application. Please try again.');
    }
  } catch (error) {
    alert('There was a problem submitting your application. Please try again.');
  }
});
</script>
